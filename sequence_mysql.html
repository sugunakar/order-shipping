DELIMITER $$
CREATE FUNCTION `next_sequenceval` (`seq_name` varchar(100))
RETURNS bigint(20) DETERMINISTIC
BEGIN
    DECLARE cur_val bigint(20);
 
    SELECT
        sequence_cur_value INTO cur_val
    FROM
        orders_db.od_sequencegenerator
    WHERE
        sequence_name = seq_name
    FOR UPDATE;
 
    IF cur_val IS NOT NULL THEN
        UPDATE
           orders_db.od_sequencegenerator
        SET
            sequence_cur_value = IF (
                (sequence_cur_value + sequence_increment) > sequence_max_value,
                IF (
                    sequence_cycle = TRUE,
                    sequence_min_value,
                    NULL
                ),
                sequence_cur_value + sequence_increment
            )
        WHERE
            sequence_name = seq_name
        ;
    END IF;
 
    RETURN cur_val;
END;

select next_sequence('your sequence name') as nextsequence;

DELIMITER $$
CREATE FUNCTION `next_sequenceval` (`seq_name` varchar(100)) RETURNS bigint(20) DETERMINISTIC BEGIN DECLARE cur_val bigint(20); SELECT sequence_cur_value INTO cur_val FROM uspsa_dev.uspsa_membership_sequence WHERE sequence_name = seq_name FOR UPDATE; IF cur_val IS NOT NULL THEN UPDATE uspsa_dev.uspsa_membership_sequence SET sequence_cur_value = IF ( (sequence_cur_value + sequence_increment) > sequence_max_value, IF ( sequence_cycle = TRUE, sequence_min_value, NULL ), sequence_cur_value + sequence_increment ) WHERE sequence_name = seq_name ; END IF; RETURN cur_val; END;